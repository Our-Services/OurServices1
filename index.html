<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خدماتنا - تصميم وتطوير المشاريع</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter (for general text, Arabic might use system fallback) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Light Mode Styles (Default) */
        body {
            font-family: 'Inter', sans-serif; /* Fallback to system sans-serif for Arabic if Inter doesn't support it fully */
            background-color: #f8fafc; /* Light blue-gray background */
            color: #334155; /* Dark slate gray text */
            scroll-behavior: smooth; /* Smooth scrolling for anchor links */
            transition: background-color 0.3s ease, color 0.3s ease; /* Smooth transition for dark mode */
        }
        .hero-section {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); /* Gradient background */
            color: white;
            padding: 4rem 1rem;
            border-bottom-left-radius: 50px;
            border-bottom-right-radius: 50px;
        }
        .section-heading {
            position: relative;
            display: inline-block;
            margin-bottom: 2rem;
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1e293b; /* Darker text for headings */
        }
        .section-heading::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 0;
            width: 70%;
            height: 4px;
            background-color: #6366f1; /* Primary color underline */
            border-radius: 2px;
        }
        .card {
            background-color: white;
            border-radius: 1.5rem; /* rounded-3xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            padding: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .btn-primary {
            background-color: #6366f1; /* Primary color */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem; /* rounded-xl */
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #4f46e5; /* Darker primary on hover */
            transform: translateY(-2px);
        }
        .contact-link {
            display: inline-flex;
            align-items: center;
            background-color: #10b981; /* Green for WhatsApp */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .contact-link:hover {
            background-color: #059669; /* Darker green on hover */
            transform: translateY(-2px);
        }
        .whatsapp-icon {
            width: 24px;
            height: 24px;
            margin-left: 0.5rem; /* For RTL */
        }
        /* Navigation specific styles */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
            backdrop-filter: blur(10px); /* Frosted glass effect */
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-bottom-left-radius: 1rem;
            border-bottom-right-radius: 1rem;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .nav-link {
            color: #334155;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .nav-link:hover {
            background-color: #e2e8f0; /* Light gray on hover */
            color: #1e293b;
        }
        .hamburger-icon {
            display: none; /* Hidden by default on larger screens */
            cursor: pointer;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 20px;
        }
        .hamburger-icon span {
            display: block;
            width: 100%;
            height: 3px;
            background-color: #334155;
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        .hamburger-icon.open span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        .hamburger-icon.open span:nth-child(2) {
            opacity: 0;
        }
        .hamburger-icon.open span:nth-child(3) {
            transform: translateY(-9px) rotate(-45deg);
        }

        /* Dark Mode Styles */
        body.dark {
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        body.dark .navbar {
            background-color: rgba(26, 32, 44, 0.95); /* Darker transparent navbar */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        body.dark .nav-link {
            color: #cbd5e0; /* Lighter links in dark mode */
        }
        body.dark .nav-link:hover {
            background-color: #2d3748; /* Darker gray on hover */
            color: #f7fafc;
        }
        body.dark .section-heading {
            color: #f7fafc; /* White heading in dark mode */
        }
        body.dark .section-heading::after {
            background-color: #8b5cf6; /* Purple underline in dark mode */
        }
        body.dark .card {
            background-color: #2d3748; /* Darker card background */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            color: #cbd5e0; /* Light text in cards */
        }
        body.dark .card h3 {
            color: #a78bfa; /* Lighter indigo for card headings */
        }
        body.dark .card p {
            color: #cbd5e0; /* Lighter gray for card text */
        }
        body.dark .hamburger-icon span {
            background-color: #e2e8f0; /* Lighter hamburger icon in dark mode */
        }
        body.dark .nav-links-container {
            background-color: rgba(26, 32, 44, 0.98); /* Darker mobile menu */
        }
        body.dark .hero-section .bg-yellow-400 {
            background-color: #f6ad55; /* Adjusted yellow for dark mode */
            color: #1a202c;
        }
        /* Specific section background overrides for dark mode */
        body.dark #about-us {
            background-color: #2d3748; /* Darker background for about us section */
        }
        body.dark #contact {
            background-color: #1a202c; /* Darker background for contact section */
        }
        body.dark #comments {
            background-color: #1a202c; /* Darker background for comments section */
        }


        /* Dark mode toggle button styles */
        #darkModeToggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        #darkModeToggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        body.dark #darkModeToggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .dark-mode-icon {
            width: 24px;
            height: 24px;
            color: #334155; /* Icon color in light mode */
        }
        body.dark .dark-mode-icon {
            color: #f7fafc; /* Icon color in dark mode */
        }

        /* Language switcher styles */
        .language-switcher {
            position: relative;
            display: inline-block;
            margin-right: 1rem; /* Adjust spacing */
        }
        .language-switcher button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
            color: #334155;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .language-switcher button:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        body.dark .language-switcher button {
            color: #e2e8f0;
        }
        body.dark .language-switcher button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .language-switcher .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 120px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 0.75rem;
            top: calc(100% + 8px); /* Position below the button */
            right: 0; /* Align to the right for RTL */
            padding: 0.5rem 0;
        }
        body.dark .language-switcher .dropdown-content {
            background-color: #2d3748;
        }
        .language-switcher .dropdown-content a {
            color: #334155;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: right; /* Align text to right for RTL */
            transition: background-color 0.2s ease;
        }
        body.dark .language-switcher .dropdown-content a {
            color: #e2e8f0;
        }
        .language-switcher .dropdown-content a:hover {
            background-color: #e2e8f0;
        }
        body.dark .language-switcher .dropdown-content a:hover {
            background-color: #4a5568;
        }
        .language-switcher.active .dropdown-content {
            display: block;
        }
        .language-icon {
            width: 20px;
            height: 20px;
        }

        /* Custom Alert Modal Styles */
        #customAlertModal {
            transition: opacity 0.3s ease;
        }
        #customAlertModal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #customAlertModal:not(.hidden) {
            opacity: 1;
            pointer-events: auto;
        }
        #customAlertModal .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        #customAlertModal .modal-buttons button {
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        #customAlertModal .modal-buttons .confirm-btn {
            background-color: #ef4444; /* Red for delete */
            color: white;
        }
        #customAlertModal .modal-buttons .confirm-btn:hover {
            background-color: #dc2626;
        }
        #customAlertModal .modal-buttons .cancel-btn {
            background-color: #cbd5e0; /* Gray for cancel */
            color: #334155;
        }
        body.dark #customAlertModal .modal-buttons .cancel-btn {
            background-color: #4a5568;
            color: #e2e8f0;
        }
        #customAlertModal .modal-buttons .cancel-btn:hover {
            background-color: #94a3b8;
        }
        body.dark #customAlertModal .modal-buttons .cancel-btn:hover {
            background-color: #64748b;
        }


        /* Mobile menu styles */
        @media (max-width: 767px) {
            .hamburger-icon {
                display: flex; /* Show hamburger on small screens */
            }
            .nav-links-container {
                display: none; /* Hide nav links by default on small screens */
                flex-direction: column;
                width: 100%;
                background-color: rgba(255, 255, 255, 0.98);
                padding-bottom: 1rem;
                border-bottom-left-radius: 1rem;
                border-bottom-right-radius: 1rem;
            }
            body.dark .nav-links-container {
                background-color: rgba(26, 32, 44, 0.98); /* Ensure mobile menu is dark in dark mode */
            }
            .nav-links-container.open {
                display: flex; /* Show when open */
            }
            .nav-link {
                padding: 0.75rem 1rem;
                text-align: center;
            }
            .language-switcher {
                margin-right: 0; /* Remove margin on mobile */
                width: 100%;
                text-align: center;
                border-top: 1px solid rgba(0,0,0,0.1);
                padding-top: 1rem;
                margin-top: 1rem;
            }
            body.dark .language-switcher {
                border-top-color: rgba(255,255,255,0.1);
            }
            .language-switcher button {
                justify-content: center;
                width: 100%;
            }
            .language-switcher .dropdown-content {
                position: static; /* Stack dropdown on mobile */
                box-shadow: none;
                width: 100%;
                margin-top: 0.5rem;
                border-radius: 0;
                background-color: transparent; /* Transparent background for mobile dropdown */
            }
            body.dark .language-switcher .dropdown-content {
                background-color: transparent;
            }
            .language-switcher .dropdown-content a {
                padding: 0.75rem 1rem;
                text-align: center;
                border-radius: 0.5rem;
            }
        }
    </style>
</head>
<body class="font-sans antialiased">

    <!-- Custom Alert Modal -->
    <div id="customAlertModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-[2000] hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl max-w-sm w-full text-center">
            <p id="customAlertMessage" class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4"></p>
            <div id="customAlertButtons" class="modal-buttons">
                <button id="customAlertCloseBtn" class="btn-primary">حسناً</button>
                <!-- Confirmation buttons will be added here if needed -->
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar py-4 px-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <!-- Logo/Site Title -->
            <a href="#hero" class="text-2xl font-bold text-indigo-700" data-i18n="siteTitle">خدماتنا</a>

            <!-- Navigation Links, Dark Mode Toggle, and Language Switcher -->
            <div class="flex items-center gap-4 sm:gap-6">
                <!-- Language Switcher -->
                <div class="language-switcher">
                    <button id="languageToggle" aria-label="Toggle language">
                        <svg class="language-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 6h2v2h-2zm0 3h2v7h-2zm-1 0h-2v7h2zm4 0h2v7h-2z"/>
                        </svg>
                        <span id="currentLanguageText">العربية</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="dropdown-content" id="languageDropdown">
                        <a href="#" data-lang="ar">العربية</a>
                        <a href="#" data-lang="en">English</a>
                        <a href="#" data-lang="zh">中文</a>
                    </div>
                </div>

                <!-- Dark Mode Toggle Button -->
                <button id="darkModeToggle" aria-label="Toggle dark mode">
                    <svg class="dark-mode-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path id="darkModeIconPath" d="M12 3a9 9 0 109 9c0-.46-.04-.92-.12-1.36a5.999 5.999 0 01-8.588-8.588C12.92 3.04 12.46 3 12 3z"/>
                    </svg>
                </button>

                <!-- Hamburger Icon for Mobile -->
                <div class="hamburger-icon md:hidden" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <!-- Navigation Links -->
                <div class="nav-links-container hidden md:flex gap-6" id="navLinks">
                    <a href="#hero" class="nav-link" data-i18n="navHome">الرئيسية</a>
                    <a href="#features" class="nav-link" data-i18n="navWhyChooseUs">لماذا تختارنا؟</a>
                    <a href="#about-us" class="nav-link" data-i18n="navAboutUs">من نحن؟</a>
                    <a href="#services" class="nav-link" data-i18n="navServices">ماذا نقدم؟</a>
                    <a href="#contact" class="nav-link" data-i18n="navContact">تواصل معنا</a>
                    <a href="#comments" class="nav-link" data-i18n="navComments">التعليقات</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="hero" class="hero-section text-center">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold mb-4 leading-tight" data-i18n="heroTitle">
                مصمم جميع أنواع المشاريع والمواقع والتصاميم والبحوث والواجبات
            </h1>
            <p class="text-2xl sm:text-3xl font-light mb-8">
                <span class="bg-yellow-400 text-gray-900 px-4 py-2 rounded-lg shadow-lg inline-block transform -rotate-1 skew-x-2">
                    خصم 30% لفترة محدودة على كامل الخدمات
                </span>
            </p>
            <p class="text-lg sm:text-xl font-light mb-8" data-i18n="heroSubtitle">
                نقدم لكم حلولاً متكاملة لتلبية جميع احتياجاتكم الأكاديمية والمهنية
            </p>
            <a href="#contact" class="btn-primary inline-block text-lg" data-i18n="heroContactBtn">
                تواصل معنا الآن
            </a>
        </div>
    </header>

    <!-- Features Section -->
    <section id="features" class="py-16 px-4">
        <div class="max-w-6xl mx-auto">
            <h2 class="section-heading text-center mb-12" data-i18n="featuresHeading">لماذا تختارنا؟</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="card text-center">
                    <div class="text-indigo-600 mb-4">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m1.636 6.364l.707-.707M6 21v-1m6.364-1.636l-.707-.707M12 21h-1m-4.636-1.636l-.707.707M3 12h1m-.707-6.364l.707-.707M12 3v1m-6.364 1.636l-.707-.707M21 12h-1m-4.636-1.636l-.707-.707M12 21v-1m6.364-1.636l-.707-.707M12 3v1m-6.364 1.636l-.707.707M21 12h-1"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2" data-i18n="feature1Title">تنسيقات شكل رائعة</h3>
                    <p class="text-gray-600" data-i18n="feature1Desc">نقدم العديد من التنسيقات الجمالية التي تبرز عملك.</p>
                </div>
                <div class="card text-center">
                    <div class="text-indigo-600 mb-4">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2" data-i18n="feature2Title">تنسيق كلام احترافي</h3>
                    <p class="text-gray-600" data-i18n="feature2Desc">تنسيق دقيق للمحتوى في البحوث والمشاريع.</p>
                </div>
                <div class="card text-center">
                    <div class="text-indigo-600 mb-4">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2" data-i18n="feature3Title">أكثر من 100 نوع خط</h3>
                    <p class="text-gray-600" data-i18n="feature3Desc">اختر من مجموعة واسعة من الخطوط المميزة.</p>
                </div>
                <div class="card text-center">
                    <div class="text-indigo-600 mb-4">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m-4 8h4m10-8h4m-4 8h4M7 12h10l4-8H3l4 8zm0 0v8a2 2 0 002 2h6a2 2 0 002-2v-8m-12 4h.01M17 12h.01"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2" data-i18n="feature4Title">عروض تقديمية مميزة</h3>
                    <p class="text-gray-600" data-i18n="feature4Desc">تصميم عروض بوربوينت جذابة ومبتكرة.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about-us" class="py-16 px-4 bg-white">
        <div class="max-w-6xl mx-auto text-center">
            <h2 class="section-heading mb-12" data-i18n="aboutUsHeading">من نحن؟</h2>
            <div class="card p-8 md:p-12">
                <p class="text-lg md:text-xl leading-relaxed text-gray-700" data-i18n="aboutUsParagraph1">
                    نحن فريق متقدم من خريجي جامعة UCSI الماليزية، نجمع بين المعرفة الأكاديمية العميقة والخبرة العملية الواسعة في تصميم وتنفيذ العديد من المشاريع الكبيرة والصغيرة.
                </p>
                <p class="text-lg md:text-xl leading-relaxed text-gray-700 mt-4" data-i18n="aboutUsParagraph2">
                    نلتزم بتقديم خدمات عالية الجودة بأسعار تنافسية للغاية، مع التركيز الدائم على تحقيق رضا العميل كشعارنا الأول والأخير ✨.
                </p>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-16 px-4">
        <div class="max-w-6xl mx-auto">
            <h2 class="section-heading text-center mb-12" data-i18n="servicesHeading">ماذا نقدم؟</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service1Title">تصميم ثلاثي الأبعاد</h3>
                    <p class="text-gray-600" data-i18n="service1Desc">تصميم جميع أنواع القطع ثلاثية الأبعاد على برامج الأوتوكاد وبرامج الطباعة ثلاثية الأبعاد بجميع صيغ الملفات القابلة للطباعة.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service2Title">عروض تقديمية (بوربوينت)</h3>
                    <p class="text-gray-600" data-i18n="service2Desc">تصميم عروض تقديمية على البوربوينت مع كامل التنسيق وإضافة الصور والحركات المرئية.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service3Title">تنسيق ملفات إكسل</h3>
                    <p class="text-gray-600" data-i18n="service3Desc">تصميم وتعديل وتنسيق ملفات إكسل باحترافية عالية.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service4Title">تصاميم هندسية ومخططات</h3>
                    <p class="text-gray-600" data-i18n="service4Desc">تصاميم هندسية، مخططات، كهرباء، وغيرها من الأعمال الهندسية المتخصصة.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service5Title">كتابة وتنسيق تقارير</h3>
                    <p class="text-gray-600" data-i18n="service5Desc">كتابة وتنسيق التقارير على برنامج الوورد بجودة ودقة عالية.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service6Title">تصميم وتعديل فيديوهات وصور</h3>
                    <p class="text-gray-600" data-i18n="service6Desc">تصميم وتعديل الفيديوهات والصور بجودة عالية لتناسب جميع احتياجاتكم.</p>
                </div>
                <div class="card lg:col-span-3">
                    <h3 class="text-xl font-semibold mb-3 text-indigo-700" data-i18n="service7Title">برمجة وتطوير مواقع الويب</h3>
                    <p class="text-gray-600" data-i18n="service7Desc">برمجة مواقع ويب تفاعلية وجمالية باستخدام لغة JavaScript وتنسيق الشكل باستخدام CSS، مع إضافة الموقع على سيرفر وإنشاء رابط خاص به.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 px-4 bg-gray-100">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="section-heading mb-12" data-i18n="contactHeading">للتواصل معنا</h2>
            <p class="text-lg md:text-xl mb-8 text-gray-700" data-i18n="contactSubtitle">
                يسعدنا استقبال استفساراتكم وطلباتكم عبر واتساب:
            </p>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-6">
                <a href="https://wa.me/966500900329" target="_blank" class="contact-link">
                    <svg class="whatsapp-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.58 15.36 3.42 16.92L2.06 22L7.3 20.64C8.86 21.49 10.56 21.94 12.29 21.94H12.04C17.5 21.94 21.95 17.49 21.95 12.04C21.95 6.58 17.5 2 12.04 2ZM17.29 15.5L16.4 17.46C16.14 17.97 15.54 18.15 15.03 17.89C13.97 17.34 12.78 16.71 11.66 15.93C10.27 14.96 9.17 13.82 8.21 12.43C7.43 11.31 6.8 10.12 6.25 9.06C5.99 8.55 6.17 7.95 6.68 7.69L8.64 6.8C9.15 6.54 9.75 6.72 10.01 7.23L10.66 8.59C10.92 9.1 10.74 9.7 10.23 9.96L9.62 10.27C9.28 10.45 9.16 10.86 9.34 11.2C9.89 12.26 10.74 13.11 11.8 13.66C12.14 13.84 12.55 13.72 12.73 13.38L13.04 12.77C13.3 12.26 13.9 12.08 14.41 12.34L15.77 12.99C16.28 13.25 16.46 13.85 16.2 14.36L15.5 15.5ZM12.04 4C16.46 4 20.04 7.58 20.04 12.04C20.04 16.46 16.46 20.04 12.04 20.04C10.61 20.04 9.25 19.68 8.05 18.99L7.66 18.77L4.69 19.53L5.45 16.56L5.23 16.17C4.54 14.97 4.18 13.61 4.18 12.04C4.18 7.58 7.76 4 12.04 4Z"/>
                    </svg>
                    <span data-i18n="whatsappNumberKSA">0500900329 داخل المملكة</span>
                </a>
                <a href="https://wa.me/60163340537" target="_blank" class="contact-link">
                    <svg class="whatsapp-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.58 15.36 3.42 16.92L2.06 22L7.3 20.64C8.86 21.49 10.56 21.94 12.29 21.94H12.04C17.5 21.94 21.95 17.49 21.95 12.04C21.95 6.58 17.5 2 12.04 2ZM17.29 15.5L16.4 17.46C16.14 17.97 15.54 18.15 15.03 17.89C13.97 17.34 12.78 16.71 11.66 15.93C10.27 14.96 9.17 13.82 8.21 12.43C7.43 11.31 6.8 10.12 6.25 9.06C5.99 8.55 6.17 7.95 6.68 7.69L8.64 6.8C9.15 6.54 9.75 6.72 10.01 7.23L10.66 8.59C10.92 9.1 10.74 9.7 10.23 9.96L9.62 10.27C9.28 10.45 9.16 10.86 9.34 11.2C9.89 12.26 10.74 13.11 11.8 13.66C12.14 13.84 12.55 13.72 12.73 13.38L13.04 12.77C13.3 12.26 13.9 12.08 14.41 12.34L15.77 12.99C16.28 13.25 16.46 13.85 16.2 14.36L15.5 15.5ZM12.04 4C16.46 4 20.04 7.58 20.04 12.04C20.04 16.46 16.46 20.04 12.04 20.04C10.61 20.04 9.25 19.68 8.05 18.99L7.66 18.77L4.69 19.53L5.45 16.56L5.23 16.17C4.54 14.97 4.18 13.61 4.18 12.04C4.18 7.58 7.76 4 12.04 4Z"/>
                    </svg>
                    <span data-i18n="whatsappNumberOutsideKSA">+60163340537 خارج المملكة</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Comments Section -->
    <section id="comments" class="py-16 px-4 bg-gray-50 dark:bg-gray-800">
        <div class="max-w-4xl mx-auto">
            <h2 class="section-heading text-center mb-12" data-i18n="commentsHeading">التعليقات</h2>
            <div class="card p-8 md:p-12">
                <h3 class="text-2xl font-semibold mb-6 text-indigo-700 dark:text-indigo-400" data-i18n="leaveComment">اترك تعليقك</h3>
                <form id="commentForm" class="space-y-4">
                    <div>
                        <label for="commentName" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="commentNameLabel">اسمك:</label>
                        <input type="text" id="commentName" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="ادخل اسمك" data-i18n-placeholder="commentNamePlaceholder" required>
                    </div>
                    <div>
                        <label for="commentText" class="block text-sm font-medium text-gray-700 dark:text-gray-300" data-i18n="commentTextLabel">تعليقك:</label>
                        <textarea id="commentText" rows="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="اكتب تعليقك هنا..." data-i18n-placeholder="commentTextPlaceholder" required></textarea>
                    </div>
                    <button type="submit" class="btn-primary w-full" data-i18n="commentSubmitBtn">إرسال التعليق</button>
                </form>

                <hr class="my-8 border-gray-200 dark:border-gray-600">

                <h3 class="text-2xl font-semibold mb-6 text-indigo-700 dark:text-indigo-400" data-i18n="allComments">جميع التعليقات</h3>
                <div id="commentsList" class="space-y-6">
                    <!-- Comments will be loaded here -->
                    <p id="commentsLoading" class="text-center text-gray-500 dark:text-gray-400" data-i18n="commentsLoading">جاري تحميل التعليقات...</p>
                    <p id="noComments" class="text-center text-gray-500 dark:text-gray-400 hidden" data-i18n="noComments">لا توجد تعليقات حتى الآن. كن أول من يعلق!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 text-center">
        <p data-i18n="footerText">&copy; 2024 جميع الحقوق محفوظة لفريق التصميم والمشاريع.</p>
    </footer>

    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, serverTimestamp, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Initialization (Global variables from Canvas)
        // ملاحظة هامة: عندما ترفع الموقع على Netlify، ستحتاج إلى استبدال هذا السطر
        // بإعدادات Firebase الفعلية الخاصة بك التي نسختها من Firebase Console.
        const firebaseConfig = {
            apiKey: "AIzaSyBbL9kbE7oP5CW4HmZJGCCmZRY2L5wxxkM",
            authDomain: "ourservices-c5658.firebaseapp.com",
            projectId: "ourservices-c5658",
            storageBucket: "ourservices-c5658.firebasestorage.app",
            messagingSenderId: "951641862997",
            appId: "1:951641862997:web:4744607ef9c0c516d9f5dc",
            measurementId: "G-5LTEVPPJW1"
        };

        // هذا المتغير يستخدم لتحديد مسار البيانات في Firestore.
        // في بيئة Canvas، يتم توفيره تلقائيًا.
        // عند النشر على Netlify، لن يكون __app_id معرفًا، لذا سيتم استخدام 'default-app-id'.
        // تأكد أن قواعد أمان Firestore الخاصة بك تتطابق مع المسار الذي يتم إنشاؤه هنا.
        // المسار المتوقع: artifacts/default-app-id/public/data/comments
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        let app, db, auth, userId;
        let isAuthReady = false;

        // Function to initialize Firebase and authenticate
        async function initFirebase() {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                // سجل قيم إعدادات Firebase و appId للتحقق من صحتها
                console.log("Firebase Config:", firebaseConfig);
                console.log("Resolved App ID for Firestore Path:", appId);


                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Firebase authenticated. User ID:", userId);
                        console.log("Firestore Path for Comments: artifacts/" + appId + "/public/data/comments"); // Log the full path
                        isAuthReady = true;
                        // Once authenticated, load comments
                        loadComments();
                    } else {
                        console.log("No user signed in. Signing in anonymously...");
                        // تأكد من تفعيل المصادقة المجهولة (Anonymous Authentication) في مشروع Firebase الخاص بك.
                        // اذهب إلى Firebase Console -> Authentication -> Sign-in method -> Anonymous -> Enable.
                        await signInAnonymously(auth);
                    }
                });
            } catch (error) {
                console.error("Error initializing Firebase:", error);
                showAlert("alertFirebaseInitError");
            }
        }

        // Call Firebase initialization
        initFirebase();

        // Translations object
        const translations = {
            ar: {
                siteTitle: "خدماتنا",
                navHome: "الرئيسية",
                navWhyChooseUs: "لماذا تختارنا؟",
                navAboutUs: "من نحن؟",
                navServices: "ماذا نقدم؟",
                navContact: "تواصل معنا",
                navComments: "التعليقات", // New translation key
                heroTitle: "مصمم جميع أنواع المشاريع والمواقع والتصاميم والبحوث والواجبات",
                heroDiscount: "خصم 30% لفترة محدودة على كامل الخدمات",
                heroSubtitle: "نقدم لكم حلولاً متكاملة لتلبية جميع احتياجاتكم الأكاديمية والمهنية",
                heroContactBtn: "تواصل معنا الآن",
                featuresHeading: "لماذا تختارنا؟",
                feature1Title: "تنسيقات شكل رائعة",
                feature1Desc: "نقدم العديد من التنسيقات الجمالية التي تبرز عملك.",
                feature2Title: "تنسيق كلام احترافي",
                feature2Desc: "تنسيق دقيق للمحتوى في البحوث والمشاريع.",
                feature3Title: "أكثر من 100 نوع خط",
                feature3Desc: "اختر من مجموعة واسعة من الخطوط المميزة.",
                feature4Title: "عروض تقديمية مميزة",
                feature4Desc: "تصميم عروض بوربوينت جذابة ومبتكرة.",
                aboutUsHeading: "من نحن؟",
                aboutUsParagraph1: "نحن فريق متقدم من خريجي جامعة UCSI الماليزية، نجمع بين المعرفة الأكاديمية العميقة والخبرة العملية الواسعة في تصميم وتنفيذ العديد من المشاريع الكبيرة والصغيرة.",
                aboutUsParagraph2: "نلتزم بتقديم خدمات عالية الجودة بأسعار تنافسية للغاية، مع التركيز الدائم على تحقيق رضا العميل كشعارنا الأول والأخير ✨.",
                servicesHeading: "ماذا نقدم؟",
                service1Title: "تصميم ثلاثي الأبعاد",
                service1Desc: "تصميم جميع أنواع القطع ثلاثية الأبعاد على برامج الأوتوكاد وبرامج الطباعة ثلاثية الأبعاد بجميع صيغ الملفات القابلة للطباعة.",
                service2Title: "عروض تقديمية (بوربوينت)",
                service2Desc: "تصميم عروض تقديمية على البوربوينت مع كامل التنسيق وإضافة الصور والحركات المرئية.",
                service3Title: "تنسيق ملفات إكسل",
                service3Desc: "تصميم وتعديل وتنسيق ملفات إكسل باحترافية عالية.",
                service4Title: "تصاميم هندسية ومخططات",
                service4Desc: "تصاميم هندسية، مخططات، كهرباء، وغيرها من الأعمال الهندسية المتخصصة.",
                service5Title: "كتابة وتنسيق تقارير",
                service5Desc: "كتابة وتنسيق التقارير على برنامج الوورد بجودة ودقة عالية.",
                service6Title: "تصميم وتعديل فيديوهات وصور",
                service6Desc: "تصميم وتعديل الفيديوهات والصور بجودة عالية لتناسب جميع احتياجاتكم.",
                service7Title: "برمجة وتطوير مواقع الويب",
                service7Desc: "برمجة مواقع ويب تفاعلية وجمالية باستخدام لغة JavaScript وتنسيق الشكل باستخدام CSS، مع إضافة الموقع على سيرفر وإنشاء رابط خاص به.",
                contactHeading: "للتواصل معنا",
                contactSubtitle: "يسعدنا استقبال استفساراتكم وطلباتكم عبر واتساب:",
                whatsappNumberKSA: "0500900329 داخل المملكة",
                whatsappNumberOutsideKSA: "+60163340537 خارج المملكة",
                footerText: "&copy; 2024 جميع الحقوق محفوظة لفريق التصميم والمشاريع.",
                currentLangDisplay: "العربية",
                commentsHeading: "التعليقات", // New translation key
                leaveComment: "اترك تعليقك", // New translation key
                commentNameLabel: "اسمك:", // New translation key
                commentNamePlaceholder: "ادخل اسمك", // New translation key
                commentTextLabel: "تعليقك:", // New translation key
                commentTextPlaceholder: "اكتب تعليقك هنا...", // New translation key
                commentSubmitBtn: "إرسال التعليق", // New translation key
                allComments: "جميع التعليقات", // New translation key
                commentsLoading: "جاري تحميل التعليقات...", // New translation key
                noComments: "لا توجد تعليقات حتى الآن. كن أول من يعلق!", // New translation key
                alertNameTextEmpty: "الرجاء إدخال اسمك.",
                alertCommentTextEmpty: "الرجاء إدخال تعليقك.",
                alertCommentAddedSuccess: "تم إضافة التعليق بنجاح!",
                alertCommentAddError: "حدث خطأ أثناء إضافة التعليق. الرجاء المحاولة مرة أخرى.",
                alertFirebaseInitError: "فشل تهيئة Firebase. قد لا تعمل التعليقات بشكل صحيح.",
                alertFirebaseNotReady: "Firebase غير جاهز بعد. الرجاء الانتظار.",
                alertDeleteConfirm: "هل أنت متأكد أنك تريد حذف هذا التعليق؟", // New translation key
                alertDeleteSuccess: "تم حذف التعليق بنجاح!", // New translation key
                alertDeleteError: "حدث خطأ أثناء حذف التعليق. الرجاء المحاولة مرة أخرى.", // New translation key
                alertNoPermission: "ليس لديك صلاحية لحذف هذا التعليق." // New translation key
            },
            en: {
                siteTitle: "Our Services",
                navHome: "Home",
                navWhyChooseUs: "Why Choose Us?",
                navAboutUs: "About Us",
                navServices: "What We Offer?",
                navContact: "Contact Us",
                navComments: "Comments", // New translation key
                heroTitle: "Designer of All Types of Projects, Websites, Designs, Research, and Assignments",
                heroDiscount: "30% discount for a limited time on all services",
                heroSubtitle: "We offer integrated solutions to meet all your academic and professional needs",
                heroContactBtn: "Contact Us Now",
                featuresHeading: "Why Choose Us?",
                feature1Title: "Excellent Visual Formats",
                feature1Desc: "We offer many aesthetic formats that highlight your work.",
                feature2Title: "Professional Content Formatting",
                feature2Desc: "Precise content formatting for research and projects.",
                feature3Title: "Over 100 Font Types",
                feature3Desc: "Choose from a wide range of distinctive fonts.",
                feature4Title: "Outstanding Presentations",
                feature4Desc: "Designing attractive and innovative PowerPoint presentations.",
                aboutUsHeading: "About Us",
                aboutUsParagraph1: "We are an advanced team of UCSI University graduates in Malaysia, combining deep academic knowledge with extensive practical experience in designing and implementing many large and small projects.",
                aboutUsParagraph2: "We are committed to providing high-quality services at highly competitive prices, with a constant focus on achieving customer satisfaction as our first and last motto ✨.",
                servicesHeading: "What We Offer?",
                service1Title: "3D Design",
                service1Desc: "Designing all types of 3D parts using AutoCAD and 3D printing software in all printable file formats.",
                service2Title: "Presentations (PowerPoint)",
                service2Desc: "Designing PowerPoint presentations with full formatting, including images and visual animations.",
                service3Title: "Excel File Formatting",
                service3Desc: "Designing, modifying, and formatting Excel files with high professionalism.",
                service4Title: "Engineering Designs and Schematics",
                service4Desc: "Engineering designs, schematics, electrical works, and other specialized engineering tasks.",
                service5Title: "Report Writing and Formatting",
                service5Desc: "Writing and formatting reports in Word with high quality and accuracy.",
                service6Title: "Video and Image Design & Editing",
                service6Desc: "Designing and editing videos and images with high quality to suit all your needs.",
                service7Title: "Web Programming and Development",
                service7Desc: "Programming interactive and aesthetic websites using JavaScript and styling with CSS, including hosting the site on a server and creating a dedicated link.",
                contactHeading: "Contact Us",
                contactSubtitle: "We are happy to receive your inquiries and requests via WhatsApp:",
                whatsappNumberKSA: "0500900329 inside KSA",
                whatsappNumberOutsideKSA: "+60163340537 outside KSA",
                footerText: "&copy; 2024 All rights reserved for the Design and Projects Team.",
                currentLangDisplay: "English",
                commentsHeading: "Comments", // New translation key
                leaveComment: "Leave your comment", // New translation key
                commentNameLabel: "Your Name:", // New translation key
                commentNamePlaceholder: "Enter your name", // New translation key
                commentTextLabel: "Your Comment:", // New translation key
                commentTextPlaceholder: "Write your comment here...", // New translation key
                commentSubmitBtn: "Submit Comment", // New translation key
                allComments: "All Comments", // New translation key
                commentsLoading: "Loading comments...", // New translation key
                noComments: "No comments yet. Be the first to comment!", // New translation key
                alertNameTextEmpty: "Please enter your name.",
                alertCommentTextEmpty: "Please enter your comment.",
                alertCommentAddedSuccess: "Comment added successfully!",
                alertCommentAddError: "Error adding comment. Please try again.",
                alertFirebaseInitError: "Firebase initialization failed. Comments may not work correctly.",
                alertFirebaseNotReady: "Firebase not ready yet. Please wait.",
                alertDeleteConfirm: "Are you sure you want to delete this comment?", // New translation key
                alertDeleteSuccess: "Comment deleted successfully!", // New translation key
                alertDeleteError: "Error deleting comment. Please try again.", // New translation key
                alertNoPermission: "You do not have permission to delete this comment." // New translation key
            },
            zh: {
                siteTitle: "我们的服务",
                navHome: "首页",
                navWhyChooseUs: "为什么选择我们？",
                navAboutUs: "关于我们",
                navServices: "我们提供什么？",
                navContact: "联系我们",
                navComments: "评论", // New translation key
                heroTitle: "各种项目、网站、设计、研究和作业的设计师",
                heroDiscount: "所有服务限时30%折扣",
                heroSubtitle: "我们提供全面的解决方案，满足您所有的学术和专业需求",
                heroContactBtn: "立即联系我们",
                featuresHeading: "为什么选择我们？",
                feature1Title: "出色的视觉格式",
                feature1Desc: "我们提供许多美学格式，突出您的作品。",
                feature2Title: "专业的文字排版",
                feature2Desc: "研究和项目内容的精确格式。",
                feature3Title: "超过100种字体",
                feature3Desc: "从各种独特的字体中选择。",
                feature4Title: "出色的演示文稿",
                feature4Desc: "设计有吸引力且创新的PowerPoint演示文稿。",
                aboutUsHeading: "关于我们",
                aboutUsParagraph1: "我们是马来西亚UCSI大学的优秀毕业生团队，将深厚的学术知识与设计和实施众多大小项目的丰富实践经验相结合。",
                aboutUsParagraph2: "我们致力于以极具竞争力的价格提供高质量的服务，始终将客户满意度作为我们的首要宗旨✨。",
                servicesHeading: "我们提供什么？",
                service1Title: "3D设计",
                service1Desc: "使用AutoCAD和3D打印软件设计所有类型的3D零件，支持所有可打印的文件格式。",
                service2Title: "演示文稿 (PowerPoint)",
                service2Desc: "设计PowerPoint演示文稿，包括完整的格式、图像和视觉动画。",
                service3Title: "Excel文件格式化",
                service3Desc: "高专业水平地设计、修改和格式化Excel文件。",
                service4Title: "工程设计和图纸",
                service4Desc: "工程设计、图纸、电气工程和其他专业工程任务。",
                service5Title: "报告撰写和格式化",
                service5Desc: "高质量和准确地在Word中撰写和格式化报告。",
                service6Title: "视频和图像设计与编辑",
                service6Desc: "高质量地设计和编辑视频和图像，以满足您的所有需求。",
                service7Title: "网站编程和开发",
                service7Desc: "使用JavaScript编程交互式和美观的网站，并使用CSS进行样式设计، بما في ذلك استضافة الموقع على خادم وإنشاء رابط خاص به.",
                contactHeading: "联系我们",
                contactSubtitle: "我们很高高兴通过WhatsApp接收您的咨询和请求：",
                whatsappNumberKSA: "0500900329 沙特阿拉伯境内",
                whatsappNumberOutsideKSA: "+60163340537 沙特阿拉伯境外",
                footerText: "&copy; 2024 设计与项目团队保留所有权利。",
                currentLangDisplay: "中文",
                commentsHeading: "评论", // New translation key
                leaveComment: "留下您的评论", // New translation key
                commentNameLabel: "您的姓名：", // New translation key
                commentNamePlaceholder: "输入您的姓名", // New translation key
                commentTextLabel: "您的评论：", // New translation key
                commentTextPlaceholder: "在此输入您的评论...", // New translation key
                commentSubmitBtn: "提交评论", // New translation key
                allComments: "所有评论", // New translation key
                commentsLoading: "正在加载评论...", // New translation key
                noComments: "目前没有评论。成为第一个评论的人！", // New translation key
                alertNameTextEmpty: "请输入您的姓名。",
                alertCommentTextEmpty: "请输入您的评论。",
                alertCommentAddedSuccess: "评论添加成功！",
                alertCommentAddError: "添加评论时出错。请重试。",
                alertFirebaseInitError: "Firebase 初始化失败。评论可能无法正常工作。",
                alertFirebaseNotReady: "Firebase 尚未准备好。请稍候。",
                alertDeleteConfirm: "您确定要删除此评论吗？", // New translation key
                alertDeleteSuccess: "评论删除成功！", // New translation key
                alertDeleteError: "删除评论时出错。请重试。", // New translation key
                alertNoPermission: "您没有权限删除此评论。" // New translation key
            }
        };

        // Custom Alert Modal Logic
        const customAlertModal = document.getElementById('customAlertModal');
        const customAlertMessage = document.getElementById('customAlertMessage');
        const customAlertButtons = document.getElementById('customAlertButtons'); // Container for buttons

        // Function to show custom alert/confirmation
        function showAlert(messageKey, type = 'alert', onConfirm = null) {
            const currentLang = localStorage.getItem('selectedLanguage') || 'ar';
            customAlertMessage.textContent = translations[currentLang][messageKey] || messageKey;

            // Clear previous buttons
            customAlertButtons.innerHTML = '';

            if (type === 'alert') {
                const closeBtn = document.createElement('button');
                closeBtn.id = 'customAlertCloseBtn';
                closeBtn.className = 'btn-primary';
                closeBtn.textContent = translations[currentLang].customAlertClose || 'حسناً'; // "حسناً" is default
                closeBtn.addEventListener('click', () => {
                    customAlertModal.classList.add('hidden');
                });
                customAlertButtons.appendChild(closeBtn);
            } else if (type === 'confirm') {
                const confirmBtn = document.createElement('button');
                confirmBtn.className = 'confirm-btn';
                confirmBtn.textContent = translations[currentLang].confirmText || 'نعم'; // "نعم" is default
                confirmBtn.addEventListener('click', () => {
                    customAlertModal.classList.add('hidden');
                    if (onConfirm) onConfirm(true);
                });

                const cancelBtn = document.createElement('button');
                cancelBtn.className = 'cancel-btn';
                cancelBtn.textContent = translations[currentLang].cancelText || 'إلغاء'; // "إلغاء" is default
                cancelBtn.addEventListener('click', () => {
                    customAlertModal.classList.add('hidden');
                    if (onConfirm) onConfirm(false);
                });

                customAlertButtons.appendChild(confirmBtn);
                customAlertButtons.appendChild(cancelBtn);
            }

            customAlertModal.classList.remove('hidden');
        }

        // Add default close button listener if it was removed by previous calls
        // This is a fallback, actual buttons are dynamically created in showAlert
        // customAlertCloseBtn.addEventListener('click', () => {
        //     customAlertModal.classList.add('hidden');
        // });


        // JavaScript for mobile navigation toggle
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');
        const languageSwitcher = document.querySelector('.language-switcher'); // Get the language switcher element

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('hidden');
            navLinks.classList.toggle('open');
            hamburger.classList.toggle('open');
            // Also toggle the language switcher visibility on mobile if needed
            if (window.innerWidth < 768) {
                languageSwitcher.classList.add('hidden'); // Hide on mobile if menu is open
            }
        });

        // Close mobile menu when a link is clicked
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) { // Only close if on mobile
                    navLinks.classList.add('hidden');
                    navLinks.classList.remove('open');
                    hamburger.classList.remove('open');
                    languageSwitcher.classList.remove('hidden'); // Show language switcher again
                }
            });
        });

        // Smooth scrolling for all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const targetId = this.getAttribute('href');
                if (targetId === '#') {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                } else {
                    document.querySelector(targetId).scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Dark Mode Toggle Logic
        const darkModeToggle = document.getElementById('darkModeToggle');
        const darkModeIconPath = document.getElementById('darkModeIconPath');
        const body = document.body;

        // Function to apply dark mode
        function applyDarkMode(isDark) {
            if (isDark) {
                body.classList.add('dark');
                darkModeIconPath.setAttribute('d', 'M12 2.5a.5.5 0 01.5.5v2a.5.5 0 01-1 0v-2a.5.5 0 01.5-.5zM18.364 5.636a.5.5 0 01.354.854l-1.414 1.414a.5.5 0 01-.707-.707l1.414-1.414a.5.5 0 01.353-.147zM21.5 12a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zM18.364 18.364a.5.5 0 01-.354.854l-1.414-1.414a.5.5 0 01.707-.707l1.414 1.414a.5.5 0 01-.353.147zM12 21.5a.5.5 0 01-.5-.5v-2a.5.5 0 011 0v2a.5.5 0 01-.5.5zM5.636 18.364a.5.5 0 01-.354-.854l1.414-1.414a.5.5 0 01.707.707l-1.414 1.414a.5.5 0 01-.353.147zM2.5 12a.5.5 0 01.5-.5h2a.5.5 0 010 1h-2a.5.5 0 01-.5-.5zM5.636 5.636a.5.5 0 01.354-.854l1.414 1.414a.5.5 0 01-.707.707L5.283 5.99a.5.5 0 01.353-.147zM12 7a5 5 0 100 10 5 5 0 000-10z'); // Sun icon path
            } else {
                body.classList.remove('dark');
                darkModeIconPath.setAttribute('d', 'M12 3a9 9 0 109 9c0-.46-.04-.92-.12-1.36a5.999 5.999 0 01-8.588-8.588C12.92 3.04 12.46 3 12 3z'); // Moon icon path
            }
        }

        // Check for saved dark mode preference on load
        const savedDarkMode = localStorage.getItem('darkMode');
        if (savedDarkMode === 'enabled') {
            applyDarkMode(true);
        } else {
            applyDarkMode(false);
        }

        // Toggle dark mode on button click
        darkModeToggle.addEventListener('click', () => {
            if (body.classList.contains('dark')) {
                localStorage.setItem('darkMode', 'disabled');
                applyDarkMode(false);
            } else {
                localStorage.setItem('darkMode', 'enabled');
                applyDarkMode(true);
            }
        });


        // Language Switcher Logic
        const languageToggle = document.getElementById('languageToggle');
        const languageDropdown = document.getElementById('languageDropdown');
        const currentLanguageText = document.getElementById('currentLanguageText');
        const htmlElement = document.documentElement; // Get the <html> element

        // Function to apply translations
        function applyTranslations(lang) {
            const currentTranslation = translations[lang];
            if (!currentTranslation) return;

            // Update HTML lang and dir attributes
            htmlElement.setAttribute('lang', lang);
            htmlElement.setAttribute('dir', (lang === 'ar' ? 'rtl' : 'ltr'));

            // Update text content based on data-i18n attributes
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (currentTranslation[key]) {
                    element.innerHTML = currentTranslation[key]; // Use innerHTML for potential HTML entities
                }
            });

            // Update placeholder texts based on data-i18n-placeholder attributes
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (currentTranslation[key]) {
                    element.setAttribute('placeholder', currentTranslation[key]);
                }
            });

            // Update current language display text
            currentLanguageText.textContent = currentTranslation.currentLangDisplay;

            // Adjust margin for WhatsApp icons based on language direction
            document.querySelectorAll('.whatsapp-icon').forEach(icon => {
                if (lang === 'ar') {
                    icon.style.marginLeft = '0.5rem';
                    icon.style.marginRight = '0';
                } else {
                    icon.style.marginRight = '0.5rem';
                    icon.style.marginLeft = '0';
                }
            });

            // Adjust section heading underline direction
            document.querySelectorAll('.section-heading').forEach(heading => {
                // Remove any existing style tag for clean updates
                let existingStyle = heading.querySelector('style');
                if (existingStyle) {
                    existingStyle.remove();
                }

                const styleTag = document.createElement('style');
                if (lang === 'ar') {
                    styleTag.textContent = `#${heading.id}::after { right: 0; left: auto; }`;
                } else {
                    styleTag.textContent = `#${heading.id}::after { left: 0; right: auto; }`;
                }
                heading.appendChild(styleTag);
            });

            // Adjust language dropdown alignment for RTL/LTR
            if (lang === 'ar') {
                languageDropdown.style.right = '0';
                languageDropdown.style.left = 'auto';
            } else {
                languageDropdown.style.left = '0';
                languageDropdown.style.right = 'auto';
            }
        }

        // Toggle language dropdown visibility
        languageToggle.addEventListener('click', (event) => {
            event.stopPropagation(); // Prevent document click from closing immediately
            languageSwitcher.classList.toggle('active');
        });

        // Handle language selection
        languageDropdown.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const selectedLang = event.target.getAttribute('data-lang');
                localStorage.setItem('selectedLanguage', selectedLang);
                applyTranslations(selectedLang);
                languageSwitcher.classList.remove('active'); // Close dropdown after selection
            });
        });

        // Close language dropdown if clicked outside
        document.addEventListener('click', (event) => {
            if (!languageSwitcher.contains(event.target)) {
                languageSwitcher.classList.remove('active');
            }
        });

        // Apply saved language on load, or default to Arabic
        const savedLanguage = localStorage.getItem('selectedLanguage') || 'ar';
        applyTranslations(savedLanguage);

        // Adjust mobile menu and language switcher visibility on resize
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768) {
                navLinks.classList.remove('hidden', 'open');
                hamburger.classList.remove('open');
                languageSwitcher.classList.remove('hidden'); // Ensure language switcher is visible on desktop
            } else {
                // On mobile, hide nav links and language switcher by default if not open
                if (!navLinks.classList.contains('open')) {
                    navLinks.classList.add('hidden');
                    languageSwitcher.classList.add('hidden');
                }
            }
        });

        // Initial check for mobile view on load
        if (window.innerWidth < 768) {
            navLinks.classList.add('hidden');
            languageSwitcher.classList.add('hidden'); // Hide language switcher on mobile initially
        }


        // Comments Logic
        const commentForm = document.getElementById('commentForm');
        const commentsList = document.getElementById('commentsList');
        const commentsLoading = document.getElementById('commentsLoading');
        const noComments = document.getElementById('noComments');

        // Function to add a new comment
        commentForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!isAuthReady) {
                console.warn("Firebase not ready yet. Please wait.");
                showAlert("alertFirebaseNotReady");
                return;
            }

            const commentName = document.getElementById('commentName').value.trim();
            const commentText = document.getElementById('commentText').value.trim();

            if (commentName === '') {
                showAlert('alertNameTextEmpty');
                return;
            }
            if (commentText === '') {
                showAlert('alertCommentTextEmpty');
                return;
            }

            try {
                // Path for public comments: artifacts/{appId}/public/data/comments
                await addDoc(collection(db, `artifacts/${appId}/public/data/comments`), {
                    name: commentName,
                    text: commentText,
                    timestamp: serverTimestamp(),
                    userId: userId // Store the userId with the comment
                });
                document.getElementById('commentName').value = '';
                document.getElementById('commentText').value = '';
                console.log("Comment added successfully!");
                showAlert("alertCommentAddedSuccess");
            } catch (e) {
                console.error("Error adding document: ", e);
                showAlert("alertCommentAddError");
            }
        });

        // Function to delete a comment
        async function deleteComment(commentId, commentUserId) {
            if (!isAuthReady) {
                showAlert("alertFirebaseNotReady");
                return;
            }

            // Check if the current user is the owner of the comment
            if (userId !== commentUserId) {
                showAlert("alertNoPermission");
                return;
            }

            showAlert("alertDeleteConfirm", 'confirm', async (confirmed) => {
                if (confirmed) {
                    try {
                        await deleteDoc(doc(db, `artifacts/${appId}/public/data/comments`, commentId));
                        console.log("Comment deleted successfully!");
                        showAlert("alertDeleteSuccess");
                    } catch (e) {
                        console.error("Error deleting document: ", e);
                        showAlert("alertDeleteError");
                    }
                }
            });
        }

        // Function to load and display comments
        function loadComments() {
            if (!db) {
                console.warn("Firestore not initialized yet.");
                return;
            }

            // Path for public comments: artifacts/{appId}/public/data/comments
            const commentsRef = collection(db, `artifacts/${appId}/public/data/comments`);
            const q = query(commentsRef); // No orderBy to avoid index issues as per instructions

            onSnapshot(q, (snapshot) => {
                commentsList.innerHTML = ''; // Clear existing comments
                commentsLoading.classList.add('hidden'); // Hide loading indicator

                if (snapshot.empty) {
                    noComments.classList.remove('hidden');
                    return;
                } else {
                    noComments.classList.add('hidden');
                }

                snapshot.forEach((doc) => {
                    const comment = doc.data();
                    const commentId = doc.id; // Get the document ID for deletion
                    const commentElement = document.createElement('div');
                    commentElement.className = 'bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm relative'; // Added relative for positioning delete button
                    commentElement.innerHTML = `
                        <div class="flex items-center mb-2">
                            <p class="font-semibold text-indigo-600 dark:text-indigo-300">${comment.name}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mr-auto">${comment.timestamp ? new Date(comment.timestamp.toDate()).toLocaleString() : 'التاريخ غير متوفر'}</p>
                        </div>
                        <p class="text-gray-800 dark:text-gray-200">${comment.text}</p>
                        <p class="text-xs text-gray-400 dark:text-gray-500 mt-2 break-all">User ID: ${comment.userId}</p>
                        ${userId === comment.userId ? `
                            <button class="absolute top-2 left-2 text-red-500 hover:text-red-700 p-1 rounded-full focus:outline-none" data-comment-id="${commentId}" data-comment-user-id="${comment.userId}" aria-label="Delete comment">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm2 3a1 1 0 011-1h4a1 1 0 110 2H10a1 1 0 01-1-1zm0 3a1 1 0 011-1h4a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                            </button>
                        ` : ''}
                    `;
                    commentsList.appendChild(commentElement);

                    // Add event listener to the delete button if it exists
                    if (userId === comment.userId) {
                        const deleteButton = commentElement.querySelector(`[data-comment-id="${commentId}"]`);
                        if (deleteButton) {
                            deleteButton.addEventListener('click', () => {
                                deleteComment(commentId, comment.userId);
                            });
                        }
                    }
                });
            }, (error) => {
                console.error("Error listening to comments:", error);
                commentsLoading.textContent = translations[localStorage.getItem('selectedLanguage') || 'ar'].commentsLoadingError || "فشل تحميل التعليقات.";
                commentsLoading.classList.remove('hidden');
            });
        }
    </script>

</body>
</html>
